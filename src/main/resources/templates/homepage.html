<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
    <th:block th:insert="base :: header"></th:block>

</head>
<body>

<div>
    <nav class="navbar navbar navbar-expand-lg navbar-light bg-dark">
        <a class="navbar-brand text-white" href="/">
            &nbsp;Messaging App
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!--</nav>-->
            <ul class="nav navbar-nav ml-auto">

                <li class="nav-item text-light active">
                    <a class="nav-link text-white" href="/">Home</a>
                </li>

                <li class="nav-item text-light">
                    <a class="nav-link text-white" href="/login">Login</a>
                </li>

                <li class="nav-item text-light">
                    <a class="nav-link text-white" href="/register">Regester</a>
                </li>
            </ul>
        </div>
    </nav>
</div>


<div class="my-5"></div>

<h1 class="text-center text-white">Welcome to Code Work Academy Messaging
    App!</h1>

<div class="my-5"></div>
<div class="container bg-light ">

    <div class="my-4 "></div>
    <h2 class="text-center py-3 pl-4 pr-5">List of Messages</h2>

    <div class="my-4" align="center">
        <table>
            <!--<h2>Insecure Page</h2>-->
            <!--<a href="/secure">Secure Page</a>-->

            <tr class="text-dark">
                <th class="pr-3">Content</th>
                <th class="pr-3">Sent By</th>
                <th class="pr-3">Date</th>
            </tr>
            <tr th:each="message:${messages}">
                <td><span th:inline="text" class="pr-4">[[${message.content}]]</span></td>
                <td><span th:inline="text" class="pr-4">[[${message.sender}]]</span></td>
                <td><span th:inline="text" class="pr-4">[[${message.date}]]</span></td>
                <td>
                    <div sec:authorize="isAuthenticated()" class="nav-link text-warning" th:inline="text">
                        <button><a th:href="@{/detail/{id}(id=${message.id})}"/>Details</button>
                    </div>

                    <div sec:authorize="hasAuthority('ADMIN')" class="nav-link text-warning" th:inline="text">
                        <button><a th:href="@{/delete/{id}(id=${message.id})}"/>Delete</a> </button>
                    </div>

                </td>
            </tr>

        </table>
        <br>
        <h5>Please login to add message!</h5>
        <div sec:authorize="isAnonymous()">
        <button class="btn btn-primary"><a class="text-white" href="/login">Login</a></button>
        </div>
        <div>

            <button id="btn-color" class="btn btn-color"><a class="text-white"
                                                            href="/login">
                Login</a></button>
            <button class="btn btn-color"><a class="text-white" href="/register">Register</a></button>
        </div>

        <div class="pb-5"></div>
    </div>
</div>

<div class="emptySpace"></div>
<div class="emptySpace"></div>
<div th:replace="base:: footer"></div>
</body>
</html>